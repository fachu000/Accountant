
from datetime import datetime, tzinfo, timedelta

def first_sunday_on_or_after(dt):
    days_to_go = 6 - dt.weekday()
    if days_to_go:
        dt += timedelta(days_to_go)
    return dt


class AmsterdamTime(tzinfo):
    """Amsterdam time is UTC+1 in winter and UTC+2 in summer"""
    def utcoffset(self, dt):
        return timedelta(hours=1) + self.dst(dt)

    def dst(self, dt):
        # changes are the last sunday of the month
        dston = first_sunday_on_or_after(datetime(year=dt.year, month=3, day=25))
        dstoff = first_sunday_on_or_after(datetime(year=dt.year, month=10, day=25))
        if dston <= dt.replace(tzinfo=None) < dstoff:
            return timedelta(hours=1)
        else:
            return timedelta(0)

class UTC(tzinfo):
    def utcoffset(self, dt):
        return timedelta(0)

    def dst(self, dt):
        return timedelta(0)
